---
// src/components/pages/ProductsPage.astro
import { t } from '../../i18n/i18n';
import type { Locale } from '../../i18n/i18n';
import { getLocale } from '../../i18n/i18n';

const currentLang = getLocale();
const products = t('items', { namespace: 'products', locale: currentLang }) || [];
---

<div class="bg-white py-12">
  
  <div class="container mx-auto px-4">
    {products.length === 0 ? (
      <p class="text-center text-gray-500">No hay productos para mostrar.</p>
    ) : (
      <div class="grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-8" id="products-grid">
        {products.map((product: any) => (
          <a
            href={`/${currentLang}/productos/${product.id}`}
            class="product-card h-full rounded-[30px] p-6 md:p-7 lg:p-8 flex flex-col items-center justify-between transition-transform duration-300 hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#F86509]"
            style={{ backgroundColor: product.background_color || '#FFFFFF' }}
            transition:animate="fade"
          >
            <div class="w-full flex justify-center items-center flex-1 mb-4 md:mb-6">
              <img
                src={product.image || '/images/products/placeholder.jpg'}
                alt={product.name}
                class="w-full max-w-[408px] h-[180px] md:h-[210px] lg:h-[235px] object-contain"
                transition:name={`product-image-${product.id}`}
              />
            </div>
            <div class="w-full text-start">
              <h3
                class="text-2xl md:text-3xl font-bold mb-2"
                style={{ color: product.text_color || '#0F0F0F' }}
              >
                {product.name}
              </h3>
              <p
                class="text-base md:text-lg italic mb-0"
                style={{ color: product.text_color || '#0F0F0F' }}
              >
                {product.short_description}
              </p>
            </div>
          </a>
        ))}
      </div>
    )}
  </div>
</div>

